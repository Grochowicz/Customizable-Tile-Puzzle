<style>
    .bg {
        display: flex;
        flex-flow: row wrap;
    }
    .drawnImg {
        opacity: 1;
    }
</style>
<b>Click on a piece and then on another to switch their positions</b><br>
<script>
var img = new Image();
img.setAttribute('crossOrigin', 'annonymous');
img.src = "https://upload.wikimedia.org/wikipedia/commons/b/bb/Yugo_SKS.jpg";
var bg = new Image();
bg.width = img.width;
bg.height = img.height;
bg.className = "bg";
document.body.appendChild(bg);
var rows = 10;
var cols = rows * img.width/img.height;
var imgPieces = [];
var drawnImgs = [];

Cut();
function Cut ()
{
    for (h=0;h<rows;h++)
  {
    for (w=0;w<cols;w++)
    {
      var canvas = document.createElement('canvas');
      canvas.width = img.width/cols;
      canvas.height = img.height/rows;
      var context = canvas.getContext('2d');
      context.drawImage(img, w*canvas.width, h*canvas.height, canvas.width, canvas.height, 0, 0, canvas.width, canvas.height);
      imgPieces.push(canvas.toDataURL());
    }
  }
  Draw();
//      for (r=0;r<rows;r++)
 //     {
//         var br = document.createElement('br');
//         document.getElementsByTagName("img")[(r*(Math.round(cols)))+(Math.round(cols)-1)].className = "rowLast";
 //        document.getElementsByTagName("img")[(r*(Math.round(cols)))+(Math.round(cols)-1)].appendChild(br);
         //v temporary indentifying border v
//         document.getElementsByClassName("rowLast").border = 1;
 //     }
}
  function Draw ()
  {
    for(i=0;i<imgPieces.length;i++)
    {
      drawnImgs[i] = document.createElement('img');
      drawnImgs[i].src = imgPieces[i];
      drawnImgs[i].className = "drawnImg";
      document.body.appendChild(drawnImgs[i]);
      document.getElementsByClassName("bg")[0].appendChild(drawnImgs[i]);
    }
  }
</script>
